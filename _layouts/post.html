---
layout: default
---

<article>
  {% include meta.html post=page %}
  {{ content }}

  <div class="post-tags-categories">
    {% if page.tags.size > 0 %}
      <div class="tags">
        <strong>Tags:</strong>
        {% for tag in page.tags %}
          <a href="{{ site.baseurl }}/tags/{{ tag | slugify }}/">{{ tag }}</a>{% unless forloop.last %}, {% endunless %}
        {% endfor %}
      </div>
    {% endif %}
    {% if page.categories.size > 0 %}
      <div class="categories">
        <strong>Categories:</strong>
        {% for category in page.categories %}
          <a href="{{ site.baseurl }}/categories/{{ category | slugify }}/">{{ category }}</a>{% unless forloop.last %}, {% endunless %}
        {% endfor %}
      </div>
    {% endif %}
  </div>

  {% if page.comments != false and site.comments.isso or site.comments.disqus %}
    <hr>
    {% if site.comments.isso_domain %}<div id="isso-thread"></div>{% endif %}
    {% if site.comments.disqus_shortname %}<div id="disqus_thread"></div>{% endif %}
    <noscript>Please enable JavaScript to view comments.</noscript>
  {% endif %}

{%- if site.giscus -%}
<section class="page__comments">
  <script src="https://giscus.app/client.js"
          data-repo="{{ site.giscus.repo }}"
          data-repo-id="{{ site.giscus.repo_id }}"
          data-category="{{ site.giscus.category }}"
          data-category-id="{{ site.giscus.category_id }}"
          data-mapping="{{ site.giscus.mapping }}"
          data-strict="{{ site.giscus.strict }}"
          data-reactions-enabled="{{ site.giscus.reactions_enabled }}"
          data-emit-metadata="{{ site.giscus.emit_metadata }}"
          data-input-position="{{ site.giscus.input_position }}"
          data-theme="{{ site.giscus.theme }}"
          data-lang="{{ site.giscus.lang }}"
          data-loading="{{ site.giscus.loading }}"
          crossorigin="anonymous"
          async>
  </script>
</section>
{%- endif -%}
</article>

<script src="/assets/js/clipboard.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Get all code blocks
    var codeBlocks = document.querySelectorAll('pre.highlight, div.highlight pre'); // Adjust selector if Rouge output is different

    codeBlocks.forEach(function(codeBlock, index) {
      // Create a unique ID for the code block if it doesn't have one
      var preElement = codeBlock.querySelector('pre') || codeBlock; // Handle cases where pre is the main block or nested
      if (!preElement.id) {
        preElement.id = 'codeblock-' + index;
      }

      // Create a button
      var button = document.createElement('button');
      button.className = 'btn btn-copy'; // Add some classes for styling
      button.innerHTML = 'Copy';
      button.setAttribute('data-clipboard-target', '#' + preElement.id);

      // Position the button. This might need adjustment based on actual layout.
      // Simplest way: insert it before the code block.
      // More robust: wrap code block and button in a new div.
      var parent = codeBlock.parentNode;
      var wrapper = document.createElement('div');
      wrapper.style.position = 'relative'; // For positioning the button absolutely if needed later

      parent.insertBefore(wrapper, codeBlock);
      wrapper.appendChild(codeBlock);
      wrapper.insertBefore(button, codeBlock); // Insert button before the pre element inside the wrapper

      // Adjust button style for better visibility if it's inside the pre wrapper
      button.style.position = 'absolute';
      button.style.top = '5px';
      button.style.right = '5px';
      button.style.zIndex = '10'; // Ensure it's above the code block

      // If the code block is directly a <pre> tag, its parent might be a <figure> or <div> generated by Jekyll.
      // We want to place the button relative to this container.
      var container = codeBlock.closest('.highlight') || codeBlock.parentNode;
      if (container && !container.style.position) {
         container.style.position = 'relative'; // Ensure container can anchor the absolute button
      }
      container.insertBefore(button, container.firstChild); // Insert button as first child of container


    });

    // Initialize ClipboardJS
    var clipboard = new ClipboardJS('.btn-copy');

    clipboard.on('success', function(e) {
      e.trigger.innerHTML = 'Copied!';
      setTimeout(function() {
        e.trigger.innerHTML = 'Copy';
      }, 2000);
      e.clearSelection();
    });

    clipboard.on('error', function(e) {
      e.trigger.innerHTML = 'Error';
      setTimeout(function() {
        e.trigger.innerHTML = 'Copy';
      }, 2000);
    });
  });
</script>
